
@{
    ViewData["Title"] = "Index";
    Layout = "_AdminLayout";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body class="container">
    <h1>Admin Index</h1>
        <div class="row g-4">
        <div class="col-sm-6 col-xl-3">
            <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                <i class="fa fa-chart-line fa-3x text-primary"></i>
                <div class="ms-3">
                    <p class="mb-2">Payed Orders</p>
                        <h6 class="mb-0">@ViewBag.PayedOrders</h6>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-xl-3">
            <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                <i class="fa fa-chart-bar fa-3x text-primary"></i>
                <div class="ms-3">
                    <p class="mb-2">Total payments</p>
                        <h6 class="mb-0">@ViewBag.orders JD</h6>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-xl-3">
            <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                <i class="fa fa-chart-area fa-3x text-primary"></i>
                <div class="ms-3">
                    <p class="mb-2">Total Profit</p>
                    <h6 class="mb-0">@ViewBag.Profit</h6>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-xl-3">
            <div class="bg-light rounded d-flex align-items-center justify-content-between p-4">
                <i class="fa fa-chart-pie fa-3x text-primary"></i>
                <div class="ms-3">
                    <p class="mb-2">Total Clients</p>
                        <h6 class="mb-0">@ViewBag.count</h6>
                </div>
            </div>
        </div>
    </div>
    <hr />
    <br />
    <div class="row">
        <div class="col-lg-6">
            <div id="payments" class="mb-4" style="width:500px; height:350px">

            </div>
        </div>
        <div class="col-lg-6">
            <div id="Buys" class="mb-4" style="width:500px; height:350px">
            </div>
        </div>
        <div class="col-lg-6">
            <div id="MonthlyPays" class="mb-4" style="width:500px; height:350px">
            </div>
        </div>
        <div class="col-lg-6">
            <div id="ProductsByCategory" class="mb-4" style="width:500px; height:350px">
            </div>
        </div>
    </div>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(DrawonLoad);
        function DrawonLoad (){
            $(function(){
                $.ajax({
                    type:'GET',
                    url:'/Admin/GetPieChartJSON',
                    success: function(chartsdata){
                        var Data = chartsdata.jsonList;
                        var data = new google.visualization.DataTable();
                        data.addColumn('string','CategoryName');
                        data.addColumn('number', 'PostCount');
                        for(var i =0; i<Data.length;i++){
                            data.addRow([Data[i].categoryName,Data[i].postCount]);
                        }
                        var chart = new google.visualization.BarChart(document.getElementById('payments'));
                        chart.draw(data,
                            {
                                title:"Payments",
                                position: "top",
                                fontsize:"14px",
                                bar: { groupWidth: "50%" },
                                'is3D': true

                        });
                    },
                    error:function(){
                        alert('Error loading data! Please try Again.')
                    }
                })
            });
        }
    </script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(DrawonLoad);
        function DrawonLoad() {
            $(function () {
                $.ajax({
                    type: 'GET',
                    url: '/Admin/GetPieChartJSONnnnn',
                    success: function (chartsdata) {
                        var Data = chartsdata.jsonList;
                        var data = new google.visualization.DataTable();
                        data.addColumn('string', 'CategoryName');
                        data.addColumn('number', 'PostCount');
                        for (var i = 0; i < Data.length; i++) {
                            data.addRow([Data[i].categoryName, Data[i].postCount]);
                        }
                        var chart = new google.visualization.PieChart(document.getElementById('ProductsByCategory'));
                        chart.draw(data,
                            {
                                title: "Products",
                                position: "top",
                                fontsize: "14px",
                                pieHole: 0.4
                            });
                    },
                    error: function () {
                        alert('Error loading data! Please try Again.')
                    }
                })
            });
        }
    </script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(DrawonLoad);
        function DrawonLoad() {
            $(function () {
                $.ajax({
                    type: 'GET',
                    url: '/Admin/GetPieChartJSONn',
                    success: function (chartsdata) {
                        var Data = chartsdata.jsonList;
                        var data = new google.visualization.DataTable();
                        data.addColumn('string', 'CategoryName');
                        data.addColumn('number', 'PostCount');
                        for (var i = 0; i < Data.length; i++) {
                            data.addRow([Data[i].categoryName, Data[i].postCount]);
                        }
                        var chart = new google.visualization.ScatterChart(document.getElementById('Buys'));
                        chart.draw(data,
                            {
                                title: "Best Buyers",
                                position: "top",
                                fontsize: "14px",
                                colors: ['green']
                            });
                    },
                    error: function () {
                        alert('Error loading data! Please try Again.')
                    }
                })
            });
        }
    </script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(DrawonLoad);
        function DrawonLoad() {
            $(function () {
                $.ajax({
                    type: 'GET',
                    url: '/Admin/GetPieChartJSONnn',
                    success: function (chartsdata) {
                        var Data = chartsdata.jsonList;
                        var data = new google.visualization.DataTable();
                        data.addColumn('string', 'CategoryName');
                        data.addColumn('number', 'PostCount');
                        for (var i = 0; i < Data.length; i++) {
                            data.addRow([Data[i].categoryName, Data[i].postCount]);
                        }
                        var chart = new google.visualization.PieChart(document.getElementById('MonthlyPays'));
                        chart.draw(data,
                            {
                                title: "Monthly Payments",
                                position: "top",
                                fontsize: "14px",
                                'is3D': true,
                                'legend': 'left'
                            });
                    },
                    error: function () {
                        alert('Error loading data! Please try Again.')
                    }
                })
            });
        }
    </script>
</body>
</html>
